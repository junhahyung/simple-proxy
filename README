I first made listening fd to client. Then in while loop, I made connection to client with accept(). Then I looked at the request and if it was GET, I modified it using the pointers. Than I opened a connection to the server, and passed the modified request to the server. Than I received many chunks from the server. I modified first part of it, before the body, and left the rest unchanged. As soon as I received it, I passed it to the client, and also saved it in the buffer for later caching. If it was the first time, flag=0, and more than once it was =1. So I decided when to cache or not. Finally I made proxy log using the time functions of C.
Thank you